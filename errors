2025-10-08T03:14:33.912389Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-49a05113-e5ce-4489-a197-47c846ba99b7', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': 'what time is it?', 'role': 'user'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83df36b0>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--39d10159-2022-4fe4-8f8c-63d9c37bc1c2')}, 'run_id': '39d10159-2022-4fe4-8f8c-63d9c37bc1c2', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 1, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:a2483b65-6006-4bd7-815d-490f1660390b', 'checkpoint_ns': 'call_model:a2483b65-6006-4bd7-815d-490f1660390b', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '74b33e7f-09ff-4b20-bf5b-aa661d03c5e8']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'sUt7HX4VTCA4ysZOAvsCkoHbsJfO41u7', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--39d10159-2022-4fe4-8f8c-63d9c37bc1c2', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'sUt7HX4VTCA4ysZOAvsCkoHbsJfO41u7', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': 'sUt7HX4VTCA4ysZOAvsCkoHbsJfO41u7', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '39d10159-2022-4fe4-8f8c-63d9c37bc1c2', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 1, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:a2483b65-6006-4bd7-815d-490f1660390b', 'checkpoint_ns': 'call_model:a2483b65-6006-4bd7-815d-490f1660390b', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '74b33e7f-09ff-4b20-bf5b-aa661d03c5e8']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--39d10159-2022-4fe4-8f8c-63d9c37bc1c2', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '39d10159-2022-4fe4-8f8c-63d9c37bc1c2', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 1, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:a2483b65-6006-4bd7-815d-490f1660390b', 'checkpoint_ns': 'call_model:a2483b65-6006-4bd7-815d-490f1660390b', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '74b33e7f-09ff-4b20-bf5b-aa661d03c5e8']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--39d10159-2022-4fe4-8f8c-63d9c37bc1c2', usage_metadata={'input_tokens': 278, 'output_tokens': 13, 'total_tokens': 291, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': '39d10159-2022-4fe4-8f8c-63d9c37bc1c2', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 1, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:a2483b65-6006-4bd7-815d-490f1660390b', 'checkpoint_ns': 'call_model:a2483b65-6006-4bd7-815d-490f1660390b', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '74b33e7f-09ff-4b20-bf5b-aa661d03c5e8']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'sUt7HX4VTCA4ysZOAvsCkoHbsJfO41u7', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--39d10159-2022-4fe4-8f8c-63d9c37bc1c2', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'sUt7HX4VTCA4ysZOAvsCkoHbsJfO41u7', 'type': 'tool_call'}], usage_metadata={'input_tokens': 278, 'output_tokens': 13, 'total_tokens': 291, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), HumanMessage(content='what time is it?', additional_kwargs={}, response_metadata={})]]}}, 'run_id': '39d10159-2022-4fe4-8f8c-63d9c37bc1c2', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 1, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:a2483b65-6006-4bd7-815d-490f1660390b', 'checkpoint_ns': 'call_model:a2483b65-6006-4bd7-815d-490f1660390b', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '74b33e7f-09ff-4b20-bf5b-aa661d03c5e8']}
=============================================
TOTAL 291
TOTAL 13
2025-10-08T03:14:35.468167Z [debug    ] HTTP Response                  [chatter.main] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ duration=1.7611563205718994 duration_ms=1761.1563205718994 headers={'cache-control': 'no-cache', 'connection': 'keep-alive', 'content-type': 'text/event-stream; charset=utf-8', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'strict-transport-security': 'max-age=31536000; includeSubDomains', 'referrer-policy': 'strict-origin-when-cross-origin', 'x-correlation-id': '01K70X0F3CK9JBNVDF0AAHEYJZ', 'x-ratelimit-limit': '100', 'x-ratelimit-remaining': '99', 'x-ratelimit-reset': '1759893333', 'x-ratelimit-window': '60'} status_code=200
2025-10-08T03:14:35.468479Z [debug    ] Recorded request metrics       [chatter.core.monitoring] method=POST path=/api/v1/workflows/execute/chat/streaming response_time_ms=1761.1563205718994
INFO:     127.0.0.1:49879 - "POST /api/v1/workflows/execute/chat/streaming HTTP/1.1" 200 OK
2025-10-08T03:14:35.473123Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-e558abe1-a5ee-4448-9af2-14eb6378ec48', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': '2025-10-07T22:14:35.471647', 'role': 'tool', 'tool_call_id': 'sUt7HX4VTCA4ysZOAvsCkoHbsJfO41u7'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83c15730>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--3d6e5625-d293-4533-bbc9-70e7d25a1516')}, 'run_id': '3d6e5625-d293-4533-bbc9-70e7d25a1516', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 3, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:80b096b1-d2b3-94e0-7070-c8e15bd9193c', 'checkpoint_ns': 'call_model:80b096b1-d2b3-94e0-7070-c8e15bd9193c', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '5f8181c7-13f5-4a05-bf6f-537c330a50bf']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'TefL6gSa0ARs3TABFMcJRZmXsOcSaI90', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--3d6e5625-d293-4533-bbc9-70e7d25a1516', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'TefL6gSa0ARs3TABFMcJRZmXsOcSaI90', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': 'TefL6gSa0ARs3TABFMcJRZmXsOcSaI90', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '3d6e5625-d293-4533-bbc9-70e7d25a1516', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 3, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:80b096b1-d2b3-94e0-7070-c8e15bd9193c', 'checkpoint_ns': 'call_model:80b096b1-d2b3-94e0-7070-c8e15bd9193c', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '5f8181c7-13f5-4a05-bf6f-537c330a50bf']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--3d6e5625-d293-4533-bbc9-70e7d25a1516', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '3d6e5625-d293-4533-bbc9-70e7d25a1516', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 3, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:80b096b1-d2b3-94e0-7070-c8e15bd9193c', 'checkpoint_ns': 'call_model:80b096b1-d2b3-94e0-7070-c8e15bd9193c', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '5f8181c7-13f5-4a05-bf6f-537c330a50bf']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--3d6e5625-d293-4533-bbc9-70e7d25a1516', usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': '3d6e5625-d293-4533-bbc9-70e7d25a1516', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 3, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:80b096b1-d2b3-94e0-7070-c8e15bd9193c', 'checkpoint_ns': 'call_model:80b096b1-d2b3-94e0-7070-c8e15bd9193c', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '5f8181c7-13f5-4a05-bf6f-537c330a50bf']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'TefL6gSa0ARs3TABFMcJRZmXsOcSaI90', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--3d6e5625-d293-4533-bbc9-70e7d25a1516', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'TefL6gSa0ARs3TABFMcJRZmXsOcSaI90', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), ToolMessage(content='2025-10-07T22:14:35.471647', tool_call_id='sUt7HX4VTCA4ysZOAvsCkoHbsJfO41u7')]]}}, 'run_id': '3d6e5625-d293-4533-bbc9-70e7d25a1516', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 3, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:80b096b1-d2b3-94e0-7070-c8e15bd9193c', 'checkpoint_ns': 'call_model:80b096b1-d2b3-94e0-7070-c8e15bd9193c', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '5f8181c7-13f5-4a05-bf6f-537c330a50bf']}
=============================================
TOTAL 305
TOTAL 14
2025-10-08T03:14:37.125096Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-1d958af6-c190-40db-aa8d-330119753db1', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': '2025-10-07T22:14:37.123680', 'role': 'tool', 'tool_call_id': 'TefL6gSa0ARs3TABFMcJRZmXsOcSaI90'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83c14920>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--a22d562e-453e-4501-97b8-158f3530901b')}, 'run_id': 'a22d562e-453e-4501-97b8-158f3530901b', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 5, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:a56a695d-bb1c-cc91-e16e-3b78ee3e957e', 'checkpoint_ns': 'call_model:a56a695d-bb1c-cc91-e16e-3b78ee3e957e', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '667c8699-71df-40fc-8386-2955d3604c2c']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'KWdREObu3KX35v5KsqFNn7exaYHJAPgK', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--a22d562e-453e-4501-97b8-158f3530901b', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'KWdREObu3KX35v5KsqFNn7exaYHJAPgK', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': 'KWdREObu3KX35v5KsqFNn7exaYHJAPgK', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'a22d562e-453e-4501-97b8-158f3530901b', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 5, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:a56a695d-bb1c-cc91-e16e-3b78ee3e957e', 'checkpoint_ns': 'call_model:a56a695d-bb1c-cc91-e16e-3b78ee3e957e', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '667c8699-71df-40fc-8386-2955d3604c2c']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--a22d562e-453e-4501-97b8-158f3530901b', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'a22d562e-453e-4501-97b8-158f3530901b', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 5, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:a56a695d-bb1c-cc91-e16e-3b78ee3e957e', 'checkpoint_ns': 'call_model:a56a695d-bb1c-cc91-e16e-3b78ee3e957e', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '667c8699-71df-40fc-8386-2955d3604c2c']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--a22d562e-453e-4501-97b8-158f3530901b', usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': 'a22d562e-453e-4501-97b8-158f3530901b', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 5, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:a56a695d-bb1c-cc91-e16e-3b78ee3e957e', 'checkpoint_ns': 'call_model:a56a695d-bb1c-cc91-e16e-3b78ee3e957e', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '667c8699-71df-40fc-8386-2955d3604c2c']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'KWdREObu3KX35v5KsqFNn7exaYHJAPgK', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--a22d562e-453e-4501-97b8-158f3530901b', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'KWdREObu3KX35v5KsqFNn7exaYHJAPgK', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), ToolMessage(content='2025-10-07T22:14:37.123680', tool_call_id='TefL6gSa0ARs3TABFMcJRZmXsOcSaI90')]]}}, 'run_id': 'a22d562e-453e-4501-97b8-158f3530901b', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 5, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:a56a695d-bb1c-cc91-e16e-3b78ee3e957e', 'checkpoint_ns': 'call_model:a56a695d-bb1c-cc91-e16e-3b78ee3e957e', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '667c8699-71df-40fc-8386-2955d3604c2c']}
=============================================
TOTAL 305
TOTAL 14
2025-10-08T03:14:38.633147Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-0fea787d-1ce8-4011-99ef-10d48b95bcdd', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': '2025-10-07T22:14:38.631771', 'role': 'tool', 'tool_call_id': 'KWdREObu3KX35v5KsqFNn7exaYHJAPgK'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83df0680>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--1e01d934-1277-4efa-bfe5-26ea74107b7d')}, 'run_id': '1e01d934-1277-4efa-bfe5-26ea74107b7d', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 7, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:950c69bd-c60a-764b-46f0-08f8bdd38579', 'checkpoint_ns': 'call_model:950c69bd-c60a-764b-46f0-08f8bdd38579', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '7efd591d-9bb6-4748-a8b7-e442e97b5f0a']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'DSGpphurzywcxtAMUECfWqugspmhMEqV', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--1e01d934-1277-4efa-bfe5-26ea74107b7d', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'DSGpphurzywcxtAMUECfWqugspmhMEqV', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': 'DSGpphurzywcxtAMUECfWqugspmhMEqV', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '1e01d934-1277-4efa-bfe5-26ea74107b7d', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 7, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:950c69bd-c60a-764b-46f0-08f8bdd38579', 'checkpoint_ns': 'call_model:950c69bd-c60a-764b-46f0-08f8bdd38579', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '7efd591d-9bb6-4748-a8b7-e442e97b5f0a']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--1e01d934-1277-4efa-bfe5-26ea74107b7d', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '1e01d934-1277-4efa-bfe5-26ea74107b7d', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 7, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:950c69bd-c60a-764b-46f0-08f8bdd38579', 'checkpoint_ns': 'call_model:950c69bd-c60a-764b-46f0-08f8bdd38579', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '7efd591d-9bb6-4748-a8b7-e442e97b5f0a']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--1e01d934-1277-4efa-bfe5-26ea74107b7d', usage_metadata={'input_tokens': 291, 'output_tokens': 20, 'total_tokens': 311, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': '1e01d934-1277-4efa-bfe5-26ea74107b7d', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 7, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:950c69bd-c60a-764b-46f0-08f8bdd38579', 'checkpoint_ns': 'call_model:950c69bd-c60a-764b-46f0-08f8bdd38579', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '7efd591d-9bb6-4748-a8b7-e442e97b5f0a']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'DSGpphurzywcxtAMUECfWqugspmhMEqV', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--1e01d934-1277-4efa-bfe5-26ea74107b7d', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'DSGpphurzywcxtAMUECfWqugspmhMEqV', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 20, 'total_tokens': 311, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), ToolMessage(content='2025-10-07T22:14:38.631771', tool_call_id='KWdREObu3KX35v5KsqFNn7exaYHJAPgK')]]}}, 'run_id': '1e01d934-1277-4efa-bfe5-26ea74107b7d', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 7, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:950c69bd-c60a-764b-46f0-08f8bdd38579', 'checkpoint_ns': 'call_model:950c69bd-c60a-764b-46f0-08f8bdd38579', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '7efd591d-9bb6-4748-a8b7-e442e97b5f0a']}
=============================================
TOTAL 311
TOTAL 20
2025-10-08T03:14:40.768973Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-eef07225-1114-423d-905a-423c35fc39bd', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': '2025-10-07T22:14:40.767601', 'role': 'tool', 'tool_call_id': 'DSGpphurzywcxtAMUECfWqugspmhMEqV'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83c41160>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--7b0416a2-4a5f-43d3-9d21-01400f39b4dc')}, 'run_id': '7b0416a2-4a5f-43d3-9d21-01400f39b4dc', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 9, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:c328be8b-a02d-7ef2-7fa5-614c20ba272b', 'checkpoint_ns': 'call_model:c328be8b-a02d-7ef2-7fa5-614c20ba272b', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'be928ff0-2dbd-4cda-91bb-d271ecabd109']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'AbojBQ6daSfx4K2TwyoPbdRYAJmQDrt6', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--7b0416a2-4a5f-43d3-9d21-01400f39b4dc', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'AbojBQ6daSfx4K2TwyoPbdRYAJmQDrt6', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': 'AbojBQ6daSfx4K2TwyoPbdRYAJmQDrt6', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '7b0416a2-4a5f-43d3-9d21-01400f39b4dc', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 9, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:c328be8b-a02d-7ef2-7fa5-614c20ba272b', 'checkpoint_ns': 'call_model:c328be8b-a02d-7ef2-7fa5-614c20ba272b', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'be928ff0-2dbd-4cda-91bb-d271ecabd109']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--7b0416a2-4a5f-43d3-9d21-01400f39b4dc', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '7b0416a2-4a5f-43d3-9d21-01400f39b4dc', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 9, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:c328be8b-a02d-7ef2-7fa5-614c20ba272b', 'checkpoint_ns': 'call_model:c328be8b-a02d-7ef2-7fa5-614c20ba272b', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'be928ff0-2dbd-4cda-91bb-d271ecabd109']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--7b0416a2-4a5f-43d3-9d21-01400f39b4dc', usage_metadata={'input_tokens': 291, 'output_tokens': 20, 'total_tokens': 311, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': '7b0416a2-4a5f-43d3-9d21-01400f39b4dc', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 9, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:c328be8b-a02d-7ef2-7fa5-614c20ba272b', 'checkpoint_ns': 'call_model:c328be8b-a02d-7ef2-7fa5-614c20ba272b', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'be928ff0-2dbd-4cda-91bb-d271ecabd109']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'AbojBQ6daSfx4K2TwyoPbdRYAJmQDrt6', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--7b0416a2-4a5f-43d3-9d21-01400f39b4dc', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'AbojBQ6daSfx4K2TwyoPbdRYAJmQDrt6', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 20, 'total_tokens': 311, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), ToolMessage(content='2025-10-07T22:14:40.767601', tool_call_id='DSGpphurzywcxtAMUECfWqugspmhMEqV')]]}}, 'run_id': '7b0416a2-4a5f-43d3-9d21-01400f39b4dc', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 9, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:c328be8b-a02d-7ef2-7fa5-614c20ba272b', 'checkpoint_ns': 'call_model:c328be8b-a02d-7ef2-7fa5-614c20ba272b', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'be928ff0-2dbd-4cda-91bb-d271ecabd109']}
=============================================
TOTAL 311
TOTAL 20
2025-10-08T03:14:42.913417Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-93997819-f29e-4a6c-930a-b7bacdbd1538', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': '2025-10-07T22:14:42.912287', 'role': 'tool', 'tool_call_id': 'AbojBQ6daSfx4K2TwyoPbdRYAJmQDrt6'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83c16db0>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585')}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'v4ItCrla3cKe86t6U4D3NyngwpNyj6r8', 'function': {'arguments': '{"', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'v4ItCrla3cKe86t6U4D3NyngwpNyj6r8', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{"', 'id': 'v4ItCrla3cKe86t6U4D3NyngwpNyj6r8', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': 'tz', 'name': None}, 'type': None}]}, response_metadata={}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', invalid_tool_calls=[{'name': None, 'args': 'tz', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': 'tz', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '":', 'name': None}, 'type': None}]}, response_metadata={}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', invalid_tool_calls=[{'name': None, 'args': '":', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '":', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '"', 'name': None}, 'type': None}]}, response_metadata={}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', invalid_tool_calls=[{'name': None, 'args': '"', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '"', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': 'America', 'name': None}, 'type': None}]}, response_metadata={}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', invalid_tool_calls=[{'name': None, 'args': 'America', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': 'America', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '/D', 'name': None}, 'type': None}]}, response_metadata={}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', invalid_tool_calls=[{'name': None, 'args': '/D', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '/D', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': 'en', 'name': None}, 'type': None}]}, response_metadata={}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', invalid_tool_calls=[{'name': None, 'args': 'en', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': 'en', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': 'ver', 'name': None}, 'type': None}]}, response_metadata={}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', invalid_tool_calls=[{'name': None, 'args': 'ver', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': 'ver', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '"}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', invalid_tool_calls=[{'name': None, 'args': '"}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '"}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', usage_metadata={'input_tokens': 291, 'output_tokens': 27, 'total_tokens': 318, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'v4ItCrla3cKe86t6U4D3NyngwpNyj6r8', 'function': {'arguments': '{"tz":"America/Denver"}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--afdbbd69-dd42-466e-b8f2-59eef3738585', tool_calls=[{'name': 'get_time', 'args': {'tz': 'America/Denver'}, 'id': 'v4ItCrla3cKe86t6U4D3NyngwpNyj6r8', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 27, 'total_tokens': 318, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), ToolMessage(content='2025-10-07T22:14:42.912287', tool_call_id='AbojBQ6daSfx4K2TwyoPbdRYAJmQDrt6')]]}}, 'run_id': 'afdbbd69-dd42-466e-b8f2-59eef3738585', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 11, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'checkpoint_ns': 'call_model:39855575-a93b-7b0c-6236-dadc7577ea27', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'd7285475-bf74-410a-9bfa-c238df830e7b']}
=============================================
TOTAL 318
TOTAL 27
2025-10-08T03:14:45.834304Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-f4f54a97-0bb4-4046-a5d9-24f8d0cb8353', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': '2025-10-07T22:14:45.832835', 'role': 'tool', 'tool_call_id': 'v4ItCrla3cKe86t6U4D3NyngwpNyj6r8'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83c41730>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--a7a4fff9-91a2-4e8d-b040-4224fd173cf5')}, 'run_id': 'a7a4fff9-91a2-4e8d-b040-4224fd173cf5', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 13, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:2489b014-4e67-cfa2-217f-695de9e7388d', 'checkpoint_ns': 'call_model:2489b014-4e67-cfa2-217f-695de9e7388d', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '6cc15873-f50a-48f2-b8c4-abc746d3df45']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'L9l6dtZBmt1Ok6uqXjyH9fsVb95pjSmb', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--a7a4fff9-91a2-4e8d-b040-4224fd173cf5', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'L9l6dtZBmt1Ok6uqXjyH9fsVb95pjSmb', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': 'L9l6dtZBmt1Ok6uqXjyH9fsVb95pjSmb', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'a7a4fff9-91a2-4e8d-b040-4224fd173cf5', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 13, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:2489b014-4e67-cfa2-217f-695de9e7388d', 'checkpoint_ns': 'call_model:2489b014-4e67-cfa2-217f-695de9e7388d', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '6cc15873-f50a-48f2-b8c4-abc746d3df45']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--a7a4fff9-91a2-4e8d-b040-4224fd173cf5', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'a7a4fff9-91a2-4e8d-b040-4224fd173cf5', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 13, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:2489b014-4e67-cfa2-217f-695de9e7388d', 'checkpoint_ns': 'call_model:2489b014-4e67-cfa2-217f-695de9e7388d', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '6cc15873-f50a-48f2-b8c4-abc746d3df45']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--a7a4fff9-91a2-4e8d-b040-4224fd173cf5', usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': 'a7a4fff9-91a2-4e8d-b040-4224fd173cf5', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 13, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:2489b014-4e67-cfa2-217f-695de9e7388d', 'checkpoint_ns': 'call_model:2489b014-4e67-cfa2-217f-695de9e7388d', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '6cc15873-f50a-48f2-b8c4-abc746d3df45']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'L9l6dtZBmt1Ok6uqXjyH9fsVb95pjSmb', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--a7a4fff9-91a2-4e8d-b040-4224fd173cf5', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'L9l6dtZBmt1Ok6uqXjyH9fsVb95pjSmb', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), ToolMessage(content='2025-10-07T22:14:45.832835', tool_call_id='v4ItCrla3cKe86t6U4D3NyngwpNyj6r8')]]}}, 'run_id': 'a7a4fff9-91a2-4e8d-b040-4224fd173cf5', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 13, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:2489b014-4e67-cfa2-217f-695de9e7388d', 'checkpoint_ns': 'call_model:2489b014-4e67-cfa2-217f-695de9e7388d', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '6cc15873-f50a-48f2-b8c4-abc746d3df45']}
=============================================
TOTAL 305
TOTAL 14
2025-10-08T03:14:47.354382Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-6c038e31-2b83-4ebc-b433-555a590bc079', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': '2025-10-07T22:14:47.353369', 'role': 'tool', 'tool_call_id': 'L9l6dtZBmt1Ok6uqXjyH9fsVb95pjSmb'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83c41220>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--f48d2a80-900e-4a5e-8d0a-6f111ee1bb4a')}, 'run_id': 'f48d2a80-900e-4a5e-8d0a-6f111ee1bb4a', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 15, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:d52a9c6c-53a6-71c4-b180-06bff5559494', 'checkpoint_ns': 'call_model:d52a9c6c-53a6-71c4-b180-06bff5559494', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '3d06b40b-2e70-4d46-8fdb-5098968954c8']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'axZs70hhH66AK6jumiMkxxuWQ5qTxZEI', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--f48d2a80-900e-4a5e-8d0a-6f111ee1bb4a', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'axZs70hhH66AK6jumiMkxxuWQ5qTxZEI', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': 'axZs70hhH66AK6jumiMkxxuWQ5qTxZEI', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'f48d2a80-900e-4a5e-8d0a-6f111ee1bb4a', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 15, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:d52a9c6c-53a6-71c4-b180-06bff5559494', 'checkpoint_ns': 'call_model:d52a9c6c-53a6-71c4-b180-06bff5559494', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '3d06b40b-2e70-4d46-8fdb-5098968954c8']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--f48d2a80-900e-4a5e-8d0a-6f111ee1bb4a', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'f48d2a80-900e-4a5e-8d0a-6f111ee1bb4a', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 15, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:d52a9c6c-53a6-71c4-b180-06bff5559494', 'checkpoint_ns': 'call_model:d52a9c6c-53a6-71c4-b180-06bff5559494', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '3d06b40b-2e70-4d46-8fdb-5098968954c8']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--f48d2a80-900e-4a5e-8d0a-6f111ee1bb4a', usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': 'f48d2a80-900e-4a5e-8d0a-6f111ee1bb4a', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 15, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:d52a9c6c-53a6-71c4-b180-06bff5559494', 'checkpoint_ns': 'call_model:d52a9c6c-53a6-71c4-b180-06bff5559494', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '3d06b40b-2e70-4d46-8fdb-5098968954c8']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'axZs70hhH66AK6jumiMkxxuWQ5qTxZEI', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--f48d2a80-900e-4a5e-8d0a-6f111ee1bb4a', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'axZs70hhH66AK6jumiMkxxuWQ5qTxZEI', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), ToolMessage(content='2025-10-07T22:14:47.353369', tool_call_id='L9l6dtZBmt1Ok6uqXjyH9fsVb95pjSmb')]]}}, 'run_id': 'f48d2a80-900e-4a5e-8d0a-6f111ee1bb4a', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 15, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:d52a9c6c-53a6-71c4-b180-06bff5559494', 'checkpoint_ns': 'call_model:d52a9c6c-53a6-71c4-b180-06bff5559494', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '3d06b40b-2e70-4d46-8fdb-5098968954c8']}
=============================================
TOTAL 305
TOTAL 14
2025-10-08T03:14:48.875352Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-20e51b0a-35d9-4de7-9911-a4a2a0ff39c8', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': '2025-10-07T22:14:48.873907', 'role': 'tool', 'tool_call_id': 'axZs70hhH66AK6jumiMkxxuWQ5qTxZEI'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83c43860>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--06e51b35-4e36-4b5e-939f-ad1a5b69d60d')}, 'run_id': '06e51b35-4e36-4b5e-939f-ad1a5b69d60d', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 17, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:d915c6c9-aa64-6513-21cd-55503c2ca725', 'checkpoint_ns': 'call_model:d915c6c9-aa64-6513-21cd-55503c2ca725', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '20a9acdd-2f4f-413f-8f49-ff823fc5f5c5']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'DvH1aVJG1euQ5LTxx6N7xLAEsMviAenG', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--06e51b35-4e36-4b5e-939f-ad1a5b69d60d', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'DvH1aVJG1euQ5LTxx6N7xLAEsMviAenG', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': 'DvH1aVJG1euQ5LTxx6N7xLAEsMviAenG', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '06e51b35-4e36-4b5e-939f-ad1a5b69d60d', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 17, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:d915c6c9-aa64-6513-21cd-55503c2ca725', 'checkpoint_ns': 'call_model:d915c6c9-aa64-6513-21cd-55503c2ca725', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '20a9acdd-2f4f-413f-8f49-ff823fc5f5c5']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--06e51b35-4e36-4b5e-939f-ad1a5b69d60d', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '06e51b35-4e36-4b5e-939f-ad1a5b69d60d', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 17, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:d915c6c9-aa64-6513-21cd-55503c2ca725', 'checkpoint_ns': 'call_model:d915c6c9-aa64-6513-21cd-55503c2ca725', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '20a9acdd-2f4f-413f-8f49-ff823fc5f5c5']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--06e51b35-4e36-4b5e-939f-ad1a5b69d60d', usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': '06e51b35-4e36-4b5e-939f-ad1a5b69d60d', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 17, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:d915c6c9-aa64-6513-21cd-55503c2ca725', 'checkpoint_ns': 'call_model:d915c6c9-aa64-6513-21cd-55503c2ca725', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '20a9acdd-2f4f-413f-8f49-ff823fc5f5c5']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'DvH1aVJG1euQ5LTxx6N7xLAEsMviAenG', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--06e51b35-4e36-4b5e-939f-ad1a5b69d60d', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'DvH1aVJG1euQ5LTxx6N7xLAEsMviAenG', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), ToolMessage(content='2025-10-07T22:14:48.873907', tool_call_id='axZs70hhH66AK6jumiMkxxuWQ5qTxZEI')]]}}, 'run_id': '06e51b35-4e36-4b5e-939f-ad1a5b69d60d', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 17, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:d915c6c9-aa64-6513-21cd-55503c2ca725', 'checkpoint_ns': 'call_model:d915c6c9-aa64-6513-21cd-55503c2ca725', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '20a9acdd-2f4f-413f-8f49-ff823fc5f5c5']}
=============================================
TOTAL 305
TOTAL 14
2025-10-08T03:14:50.393197Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-85577cd2-538f-47ba-beb6-f92d8a08326b', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': '2025-10-07T22:14:50.392099', 'role': 'tool', 'tool_call_id': 'DvH1aVJG1euQ5LTxx6N7xLAEsMviAenG'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83c40b00>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--732c9ba6-7b97-4c14-9d79-4f1c68dcb18c')}, 'run_id': '732c9ba6-7b97-4c14-9d79-4f1c68dcb18c', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 19, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:27101bf4-17d3-bcc9-4d88-5f5fa94a8ee1', 'checkpoint_ns': 'call_model:27101bf4-17d3-bcc9-4d88-5f5fa94a8ee1', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '9265b423-7169-4454-9463-7363fec95637']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'sLt3NQHs6xkq3kxIOI7cvJNkOZOHwbz4', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--732c9ba6-7b97-4c14-9d79-4f1c68dcb18c', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'sLt3NQHs6xkq3kxIOI7cvJNkOZOHwbz4', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': 'sLt3NQHs6xkq3kxIOI7cvJNkOZOHwbz4', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '732c9ba6-7b97-4c14-9d79-4f1c68dcb18c', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 19, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:27101bf4-17d3-bcc9-4d88-5f5fa94a8ee1', 'checkpoint_ns': 'call_model:27101bf4-17d3-bcc9-4d88-5f5fa94a8ee1', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '9265b423-7169-4454-9463-7363fec95637']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--732c9ba6-7b97-4c14-9d79-4f1c68dcb18c', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '732c9ba6-7b97-4c14-9d79-4f1c68dcb18c', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 19, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:27101bf4-17d3-bcc9-4d88-5f5fa94a8ee1', 'checkpoint_ns': 'call_model:27101bf4-17d3-bcc9-4d88-5f5fa94a8ee1', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '9265b423-7169-4454-9463-7363fec95637']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--732c9ba6-7b97-4c14-9d79-4f1c68dcb18c', usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': '732c9ba6-7b97-4c14-9d79-4f1c68dcb18c', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 19, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:27101bf4-17d3-bcc9-4d88-5f5fa94a8ee1', 'checkpoint_ns': 'call_model:27101bf4-17d3-bcc9-4d88-5f5fa94a8ee1', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '9265b423-7169-4454-9463-7363fec95637']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'sLt3NQHs6xkq3kxIOI7cvJNkOZOHwbz4', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--732c9ba6-7b97-4c14-9d79-4f1c68dcb18c', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'sLt3NQHs6xkq3kxIOI7cvJNkOZOHwbz4', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 14, 'total_tokens': 305, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), ToolMessage(content='2025-10-07T22:14:50.392099', tool_call_id='DvH1aVJG1euQ5LTxx6N7xLAEsMviAenG')]]}}, 'run_id': '732c9ba6-7b97-4c14-9d79-4f1c68dcb18c', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 19, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:27101bf4-17d3-bcc9-4d88-5f5fa94a8ee1', 'checkpoint_ns': 'call_model:27101bf4-17d3-bcc9-4d88-5f5fa94a8ee1', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', '9265b423-7169-4454-9463-7363fec95637']}
=============================================
TOTAL 305
TOTAL 14
2025-10-08T03:14:51.919196Z [info     ] LLM Node call_model applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-f72b30b7-5deb-4b18-984b-be1a895363dc', 'json_data': {'messages': [{'content': 'You are a helpful assistant.', 'role': 'system'}, {'content': '2025-10-07T22:14:51.917886', 'role': 'tool', 'tool_call_id': 'sLt3NQHs6xkq3kxIOI7cvJNkOZOHwbz4'}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83df0320>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--75d681a7-829c-4b6f-b4cb-c43ea9370c04')}, 'run_id': '75d681a7-829c-4b6f-b4cb-c43ea9370c04', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 21, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:987c9a09-8395-f1a9-2668-9cad6d19498e', 'checkpoint_ns': 'call_model:987c9a09-8395-f1a9-2668-9cad6d19498e', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'f49a6b81-18d0-42f3-a45d-dda2086f6eeb']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'cU9UXWmoX8BSIS1uF4vHYBCcob9OIKD9', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--75d681a7-829c-4b6f-b4cb-c43ea9370c04', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'cU9UXWmoX8BSIS1uF4vHYBCcob9OIKD9', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': 'cU9UXWmoX8BSIS1uF4vHYBCcob9OIKD9', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '75d681a7-829c-4b6f-b4cb-c43ea9370c04', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 21, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:987c9a09-8395-f1a9-2668-9cad6d19498e', 'checkpoint_ns': 'call_model:987c9a09-8395-f1a9-2668-9cad6d19498e', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'f49a6b81-18d0-42f3-a45d-dda2086f6eeb']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--75d681a7-829c-4b6f-b4cb-c43ea9370c04', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': '75d681a7-829c-4b6f-b4cb-c43ea9370c04', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 21, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:987c9a09-8395-f1a9-2668-9cad6d19498e', 'checkpoint_ns': 'call_model:987c9a09-8395-f1a9-2668-9cad6d19498e', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'f49a6b81-18d0-42f3-a45d-dda2086f6eeb']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--75d681a7-829c-4b6f-b4cb-c43ea9370c04', usage_metadata={'input_tokens': 291, 'output_tokens': 20, 'total_tokens': 311, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': '75d681a7-829c-4b6f-b4cb-c43ea9370c04', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 21, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:987c9a09-8395-f1a9-2668-9cad6d19498e', 'checkpoint_ns': 'call_model:987c9a09-8395-f1a9-2668-9cad6d19498e', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'f49a6b81-18d0-42f3-a45d-dda2086f6eeb']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'cU9UXWmoX8BSIS1uF4vHYBCcob9OIKD9', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--75d681a7-829c-4b6f-b4cb-c43ea9370c04', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'cU9UXWmoX8BSIS1uF4vHYBCcob9OIKD9', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 20, 'total_tokens': 311, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='You are a helpful assistant.', additional_kwargs={}, response_metadata={}), ToolMessage(content='2025-10-07T22:14:51.917886', tool_call_id='sLt3NQHs6xkq3kxIOI7cvJNkOZOHwbz4')]]}}, 'run_id': '75d681a7-829c-4b6f-b4cb-c43ea9370c04', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 21, 'langgraph_node': 'call_model', 'langgraph_triggers': ('branch:to:call_model',), 'langgraph_path': ('__pregel_pull', 'call_model'), 'langgraph_checkpoint_ns': 'call_model:987c9a09-8395-f1a9-2668-9cad6d19498e', 'checkpoint_ns': 'call_model:987c9a09-8395-f1a9-2668-9cad6d19498e', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'f49a6b81-18d0-42f3-a45d-dda2086f6eeb']}
=============================================
TOTAL 311
TOTAL 20
2025-10-08T03:14:54.064356Z [info     ] LLM Node finalize_response applying context [chatter.core.workflow_graph_builder] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ has_retrieval_context=False retrieval_context_length=0
Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-9539d941-9f54-4736-8056-c918fd8ba34a', 'json_data': {'messages': [{'content': 'Provide a final response based on the tool results.', 'role': 'system'}, {'content': None, 'role': 'assistant', 'tool_calls': [{'type': 'function', 'id': 'cU9UXWmoX8BSIS1uF4vHYBCcob9OIKD9', 'function': {'name': 'get_time', 'arguments': '{}'}}]}], 'model': 'gpt-4', 'max_completion_tokens': 4096, 'stream': True, 'temperature': 0.7, 'tools': [{'type': 'function', 'function': {'name': 'calculator', 'description': 'Perform basic mathematical calculations', 'parameters': {'properties': {'expression': {'type': 'string'}}, 'required': ['expression'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'get_time', 'description': "Get the current date and time. Call this function once if needed, optionally specifying a timezone using 'tz' (e.g., 'America/Denver'). After calling, use the returned time to answer the user's question in natural language.", 'parameters': {'properties': {}, 'type': 'object'}}}]}}
Sending HTTP Request: POST http://localhost:8080/v1/chat/completions
connect_tcp.started host='localhost' port=8080 local_address=None timeout=None socket_options=None
connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x776e83c15910>
send_request_headers.started request=<Request [b'POST']>
send_request_headers.complete
send_request_body.started request=<Request [b'POST']>
send_request_body.complete
receive_response_headers.started request=<Request [b'POST']>
receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Keep-Alive', b'timeout=5, max=100'), (b'Content-Type', b'text/event-stream'), (b'Server', b'llama.cpp'), (b'Transfer-Encoding', b'chunked'), (b'Access-Control-Allow-Origin', b'')])
HTTP Request: POST http://localhost:8080/v1/chat/completions "HTTP/1.1 200 OK"
HTTP Response: POST http://localhost:8080/v1/chat/completions "200 OK" Headers({'keep-alive': 'timeout=5, max=100', 'content-type': 'text/event-stream', 'server': 'llama.cpp', 'transfer-encoding': 'chunked', 'access-control-allow-origin': ''})
request_id: None
receive_response_body.started request=<Request [b'POST']>
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={}, id='run--bd0f55dd-f96f-4ace-ad0b-2cf4676dd845')}, 'run_id': 'bd0f55dd-f96f-4ace-ad0b-2cf4676dd845', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 22, 'langgraph_node': 'finalize_response', 'langgraph_triggers': ('branch:to:finalize_response',), 'langgraph_path': ('__pregel_pull', 'finalize_response'), 'langgraph_checkpoint_ns': 'finalize_response:c7980032-8e5d-2122-96ec-048e63f76b64', 'checkpoint_ns': 'finalize_response:c7980032-8e5d-2122-96ec-048e63f76b64', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'f3343919-4d43-4b96-b2bb-9fe390688b71']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': '0MD0ZUtbl9ezFwI2QcdwocaxFqQ9ufym', 'function': {'arguments': '{', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={}, id='run--bd0f55dd-f96f-4ace-ad0b-2cf4676dd845', tool_calls=[{'name': 'get_time', 'args': {}, 'id': '0MD0ZUtbl9ezFwI2QcdwocaxFqQ9ufym', 'type': 'tool_call'}], tool_call_chunks=[{'name': 'get_time', 'args': '{', 'id': '0MD0ZUtbl9ezFwI2QcdwocaxFqQ9ufym', 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'bd0f55dd-f96f-4ace-ad0b-2cf4676dd845', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 22, 'langgraph_node': 'finalize_response', 'langgraph_triggers': ('branch:to:finalize_response',), 'langgraph_path': ('__pregel_pull', 'finalize_response'), 'langgraph_checkpoint_ns': 'finalize_response:c7980032-8e5d-2122-96ec-048e63f76b64', 'checkpoint_ns': 'finalize_response:c7980032-8e5d-2122-96ec-048e63f76b64', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'f3343919-4d43-4b96-b2bb-9fe390688b71']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': None, 'function': {'arguments': '}', 'name': None}, 'type': None}]}, response_metadata={}, id='run--bd0f55dd-f96f-4ace-ad0b-2cf4676dd845', invalid_tool_calls=[{'name': None, 'args': '}', 'id': None, 'error': None, 'type': 'invalid_tool_call'}], tool_call_chunks=[{'name': None, 'args': '}', 'id': None, 'index': 0, 'type': 'tool_call_chunk'}])}, 'run_id': 'bd0f55dd-f96f-4ace-ad0b-2cf4676dd845', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 22, 'langgraph_node': 'finalize_response', 'langgraph_triggers': ('branch:to:finalize_response',), 'langgraph_path': ('__pregel_pull', 'finalize_response'), 'langgraph_checkpoint_ns': 'finalize_response:c7980032-8e5d-2122-96ec-048e63f76b64', 'checkpoint_ns': 'finalize_response:c7980032-8e5d-2122-96ec-048e63f76b64', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'f3343919-4d43-4b96-b2bb-9fe390688b71']}
EVENT {'event': 'on_chat_model_stream', 'data': {'chunk': AIMessageChunk(content='', additional_kwargs={}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--bd0f55dd-f96f-4ace-ad0b-2cf4676dd845', usage_metadata={'input_tokens': 272, 'output_tokens': 14, 'total_tokens': 286, 'input_token_details': {}, 'output_token_details': {}})}, 'run_id': 'bd0f55dd-f96f-4ace-ad0b-2cf4676dd845', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 22, 'langgraph_node': 'finalize_response', 'langgraph_triggers': ('branch:to:finalize_response',), 'langgraph_path': ('__pregel_pull', 'finalize_response'), 'langgraph_checkpoint_ns': 'finalize_response:c7980032-8e5d-2122-96ec-048e63f76b64', 'checkpoint_ns': 'finalize_response:c7980032-8e5d-2122-96ec-048e63f76b64', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'f3343919-4d43-4b96-b2bb-9fe390688b71']}
receive_response_body.complete
response_closed.started
response_closed.complete
close.started
close.complete
EVENT {'event': 'on_chat_model_end', 'data': {'output': AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': '0MD0ZUtbl9ezFwI2QcdwocaxFqQ9ufym', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--bd0f55dd-f96f-4ace-ad0b-2cf4676dd845', tool_calls=[{'name': 'get_time', 'args': {}, 'id': '0MD0ZUtbl9ezFwI2QcdwocaxFqQ9ufym', 'type': 'tool_call'}], usage_metadata={'input_tokens': 272, 'output_tokens': 14, 'total_tokens': 286, 'input_token_details': {}, 'output_token_details': {}}), 'input': {'messages': [[SystemMessage(content='Provide a final response based on the tool results.', additional_kwargs={}, response_metadata={}), AIMessage(content='', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'cU9UXWmoX8BSIS1uF4vHYBCcob9OIKD9', 'function': {'arguments': '{}', 'name': 'get_time'}, 'type': 'function'}]}, response_metadata={'finish_reason': 'tool_calls', 'model_name': 'gpt-4', 'system_fingerprint': 'b5833-a0374a67'}, id='run--75d681a7-829c-4b6f-b4cb-c43ea9370c04', tool_calls=[{'name': 'get_time', 'args': {}, 'id': 'cU9UXWmoX8BSIS1uF4vHYBCcob9OIKD9', 'type': 'tool_call'}], usage_metadata={'input_tokens': 291, 'output_tokens': 20, 'total_tokens': 311, 'input_token_details': {}, 'output_token_details': {}})]]}}, 'run_id': 'bd0f55dd-f96f-4ace-ad0b-2cf4676dd845', 'name': 'ChatOpenAI', 'tags': ['seq:step:1'], 'metadata': {'thread_id': '01K6Z7HNH64ZEFX2STQ1HT660S', 'langgraph_step': 22, 'langgraph_node': 'finalize_response', 'langgraph_triggers': ('branch:to:finalize_response',), 'langgraph_path': ('__pregel_pull', 'finalize_response'), 'langgraph_checkpoint_ns': 'finalize_response:c7980032-8e5d-2122-96ec-048e63f76b64', 'checkpoint_ns': 'finalize_response:c7980032-8e5d-2122-96ec-048e63f76b64', 'ls_provider': 'openai', 'ls_model_name': 'gpt-4', 'ls_model_type': 'chat', 'ls_temperature': 0.7, 'ls_max_tokens': 4096}, 'parent_ids': ['6bb68f0f-c9cf-4675-8e10-5934efd5be37', 'f3343919-4d43-4b96-b2bb-9fe390688b71']}
=============================================
TOTAL 286
TOTAL 14
2025-10-08T03:14:55.630122Z [info     ] Finished workflow tracking     [chatter.core.monitoring] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ execution_time=21.726717 success=True workflow_id=01K70X0F9F4F8QPR6F6F2W2GXX
2025-10-08T03:14:55.630313Z [info     ] Completed workflow execution 01K70X0F3TW1DARPXNG4ZM1R0Z [chatter.core.workflow_tracker] correlation_id=01K70X0F3CK9JBNVDF0AAHEYJZ cost=0.0 execution_time_ms=21720 tokens_used=286
