<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflow Template Buttons Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .template-card { border: 1px solid #ddd; padding: 20px; margin: 10px; border-radius: 8px; }
        .button-group { display: flex; gap: 10px; margin-top: 10px; }
        button { padding: 8px 16px; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; }
        .view-button { background: #2196F3; color: white; }
        .copy-button { background: #4CAF50; color: white; }
        #output { margin-top: 20px; padding: 10px; background: #f5f5f5; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Workflow Template Buttons Test</h1>
    <p>This simulates the workflow template cards with View Details and Copy Template buttons.</p>
    
    <div class="template-card">
        <h3>Basic Chat Template</h3>
        <p>Simple conversational workflow with a single model call</p>
        <p><strong>Type:</strong> sequential</p>
        <p><strong>Tools:</strong> chat_model</p>
        
        <div class="button-group">
            <button onclick="executeTemplate('basic-chat')" class="execute-button">Execute</button>
            <button onclick="viewDetails('basic-chat')" class="view-button">üëÅÔ∏è View Details</button>
            <button onclick="copyTemplate('basic-chat')" class="copy-button">üìã Copy Template</button>
        </div>
    </div>
    
    <div class="template-card">
        <h3>RAG Pipeline Template</h3>
        <p>Advanced RAG workflow with error handling</p>
        <p><strong>Type:</strong> conditional</p>
        <p><strong>Tools:</strong> retrieval, chat_model, error_handler</p>
        
        <div class="button-group">
            <button onclick="executeTemplate('rag-pipeline')" class="execute-button">Execute</button>
            <button onclick="viewDetails('rag-pipeline')" class="view-button">üëÅÔ∏è View Details</button>
            <button onclick="copyTemplate('rag-pipeline')" class="copy-button">üìã Copy Template</button>
        </div>
    </div>
    
    <div id="output">
        <h3>Output Log:</h3>
        <div id="log"></div>
    </div>

    <script>
        // Mock template data similar to WorkflowTemplateInfo structure
        const templates = {
            'basic-chat': {
                name: 'Basic Chat Template',
                workflow_type: 'sequential',
                description: 'Simple conversational workflow with a single model call',
                required_tools: ['chat_model'],
                required_retrievers: [],
                default_params: {
                    temperature: 0.7,
                    max_tokens: 1000
                }
            },
            'rag-pipeline': {
                name: 'RAG Pipeline Template',
                workflow_type: 'conditional',
                description: 'Advanced RAG workflow with error handling',
                required_tools: ['retrieval', 'chat_model', 'error_handler'],
                required_retrievers: ['knowledge_base'],
                default_params: {
                    temperature: 0.3,
                    top_k: 5,
                    retrieval_threshold: 0.8
                }
            }
        };

        function log(message) {
            const logDiv = document.getElementById('log');
            const p = document.createElement('p');
            p.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            logDiv.appendChild(p);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function executeTemplate(templateName) {
            log(`üöÄ Execute Template: ${templateName}`);
        }

        function viewDetails(templateName) {
            const template = templates[templateName];
            if (template) {
                log(`üëÅÔ∏è View Details clicked for: ${templateName}`);
                
                // Simulate showing details dialog
                const details = `
Template: ${template.name}
Type: ${template.workflow_type}
Description: ${template.description}
Required Tools: ${template.required_tools.join(', ')}
Required Retrievers: ${template.required_retrievers.join(', ')}
Default Params: ${JSON.stringify(template.default_params, null, 2)}`;
                
                alert(`Template Details:\n\n${details}`);
                log(`‚úÖ Details dialog shown for ${templateName}`);
            }
        }

        async function copyTemplate(templateName) {
            const template = templates[templateName];
            if (template) {
                log(`üìã Copy Template clicked for: ${templateName}`);
                
                try {
                    const templateData = {
                        name: template.name,
                        workflow_type: template.workflow_type,
                        description: template.description,
                        required_tools: template.required_tools,
                        required_retrievers: template.required_retrievers,
                        default_params: template.default_params
                    };
                    
                    await navigator.clipboard.writeText(JSON.stringify(templateData, null, 2));
                    log(`‚úÖ Template "${templateName}" copied to clipboard`);
                    
                    // Show a visual confirmation
                    const button = event.target;
                    const originalText = button.textContent;
                    button.textContent = '‚úÖ Copied!';
                    button.style.background = '#4CAF50';
                    setTimeout(() => {
                        button.textContent = originalText;
                        button.style.background = '#4CAF50';
                    }, 2000);
                    
                } catch (error) {
                    log(`‚ùå Failed to copy template to clipboard: ${error.message}`);
                    alert('Failed to copy template to clipboard');
                }
            }
        }

        // Initial log message
        log('üéØ Workflow Template Buttons Test loaded - Click buttons to test functionality');
    </script>
</body>
</html>